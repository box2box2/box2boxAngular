import{a as W,b as K,c as Q,e as U,g as V,h as X}from"./chunk-QRI4NIZV.js";import{$ as N,Ba as Y,S as R,T as D,_ as $,aa as L,e as I,f as w,g as k,ga as j,i as B,j as F,k as A,ua as z,va as H,wa as q,xa as G,ya as J}from"./chunk-ZCCGCO2Q.js";import{$b as c,Ab as t,Bb as y,Kb as f,Lb as p,Ua as r,Za as C,Zb as i,_b as g,ac as S,bc as E,cc as b,dc as h,eb as M,ec as T,hc as u,ic as d,jb as O,jc as s,yb as l,zb as n}from"./chunk-USGJPQKR.js";import"./chunk-TSRGIXR5.js";var _=class{BaseStake=0;TotalPnlAmount=0;TotalPnlPercent=0;DonePnlAmount=0;Orders=[]};var v=(o,a)=>({positive:o,negative:a});function ee(o,a){if(o&1&&(n(0,"mat-card",11)(1,"mat-card-content")(2,"div",12)(3,"span"),i(4,"Total PnL Amount:"),t(),n(5,"strong",13),i(6),d(7,"number"),t()(),n(8,"div",12)(9,"span"),i(10,"Total PnL Percent:"),t(),n(11,"strong",13),i(12),d(13,"number"),t()(),n(14,"div",12)(15,"span"),i(16,"Done PnL Amount:"),t(),n(17,"strong",13),i(18),d(19,"number"),t()()()()),o&2){let e=p();r(5),l("ngClass",u(15,v,e.fullResult.TotalPnlAmount>0,e.fullResult.TotalPnlAmount<0)),r(),c(" $ ",s(7,6,e.fullResult.TotalPnlAmount,"1.2-2")," "),r(5),l("ngClass",u(18,v,e.fullResult.TotalPnlPercent>0,e.fullResult.TotalPnlPercent<0)),r(),c(" ",s(13,9,e.fullResult.TotalPnlPercent,"1.2-2"),"% "),r(5),l("ngClass",u(21,v,e.fullResult.DonePnlAmount>0,e.fullResult.DonePnlAmount<0)),r(),c(" $ ",s(19,12,e.fullResult.DonePnlAmount,"1.2-2")," ")}}function te(o,a){o&1&&(n(0,"div",14),y(1,"mat-spinner",15),t())}function ne(o,a){if(o&1&&(n(0,"div",17)(1,"span"),i(2,"Exit Price:"),t(),n(3,"span"),i(4),d(5,"number"),t()()),o&2){let e=p().$implicit;r(4),c("$ ",s(5,1,e.ExitPrice,"1.2-4"))}}function ie(o,a){if(o&1&&(n(0,"div",17)(1,"span"),i(2,"Exit Type:"),t(),n(3,"span"),i(4),t()()),o&2){let e=p().$implicit;r(4),g(e.ExitType)}}function re(o,a){if(o&1&&(n(0,"div",17)(1,"span"),i(2,"Failure Reason:"),t(),n(3,"span"),i(4),t()()),o&2){let e=p().$implicit;r(4),g(e.FailureReason)}}function ae(o,a){if(o&1&&(n(0,"mat-card",16)(1,"mat-card-header")(2,"mat-card-title"),i(3),t()(),n(4,"mat-card-content")(5,"div",17)(6,"span"),i(7,"Entry:"),t(),n(8,"span"),i(9),d(10,"number"),t()(),n(11,"div",17)(12,"span"),i(13,"Current Price:"),t(),n(14,"span"),i(15),d(16,"number"),t()(),n(17,"div",17)(18,"span"),i(19,"PnL:"),t(),n(20,"span",13),i(21),d(22,"number"),d(23,"number"),t()(),n(24,"div",17)(25,"span"),i(26,"Stop Loss:"),t(),n(27,"span"),i(28),d(29,"number"),t()(),n(30,"div",17)(31,"span"),i(32,"Target 1:"),t(),n(33,"span"),i(34),d(35,"number"),t()(),n(36,"div",17)(37,"span"),i(38,"Target 2:"),t(),n(39,"span"),i(40),d(41,"number"),t()(),n(42,"div",17)(43,"span"),i(44,"Timeframe:"),t(),n(45,"span"),i(46),t()(),n(47,"div",18)(48,"span"),i(49,"Created:"),t(),n(50,"span"),i(51),d(52,"date"),t()(),O(53,ne,6,4,"div",19)(54,ie,5,1,"div",19)(55,re,5,1,"div",19),t()()),o&2){let e=a.$implicit;r(3),E(" ",e.Symbol," \u2022 ",e.Direction," \u2022 ",e.Status," "),r(6),c("$ ",s(10,17,e.EntryPrice,"1.2-4")),r(6),c("$ ",s(16,20,e.CurrentPrice,"1.2-4")),r(5),l("ngClass",u(41,v,e.PnlAmount>0,e.PnlAmount<0)),r(),S(" $ ",s(22,23,e.PnlAmount,"1.2-2")," (",s(23,26,e.PnlPercent,"1.2-2"),"%) "),r(7),c("$ ",s(29,29,e.StopLoss,"1.2-4")),r(6),c("$ ",s(35,32,e.TargetPrice,"1.2-4")),r(6),c("$ ",s(41,35,e.Target2Price,"1.2-4")),r(6),S("",e.ExecutionTimeframe," / ",e.ConfirmationTimeframe),r(5),g(s(52,38,e.CreatedAt,"HH:mm dd/MM/yyyy")),r(2),l("ngIf",e.ExitPrice),r(),l("ngIf",e.ExitType),r(),l("ngIf",e.FailureReason)}}var Z=class o{constructor(a,e){this._marketService=a;this._snackbar=e}orders=[];filteredOrders=[];selectedStatus="";fullResult=new _;loading=!1;ngOnInit(){this.loading=!0,this._marketService.getTradeOrders().subscribe(a=>{this.orders=a.Orders,this.fullResult=a,this.filteredOrders=[...this.orders],this.loading=!1,console.log("Orders fetched:",this.orders)})}filterOrders(){this.selectedStatus?this.filteredOrders=this.orders.filter(a=>a.Status===this.selectedStatus):this.filteredOrders=[...this.orders]}getStatusColor(a){return a==="NEW"?"primary":a==="DONE"?"accent":""}deleteOrder(a){this._marketService.deleteOrder(a).subscribe(()=>{this.orders=this.orders.filter(e=>e.Id!==a),console.log(`Order with ID ${a} deleted.`)})}refresh(){this.loading=!0,this._marketService.getTradeOrders().subscribe(a=>{this.orders=a.Orders,this.fullResult=a,this.filteredOrders=[...this.orders],console.log("Orders refreshed:",this.orders),this.loading=!1,this._snackbar.open("Orders refreshed","Close",{duration:2e3})})}back(){window.history.back()}static \u0275fac=function(e){return new(e||o)(C(Y),C($))};static \u0275cmp=M({type:o,selectors:[["app-orders"]],decls:19,vars:7,consts:[[1,"orders-container"],[1,"actions"],["mat-button","",3,"click","disabled"],["appearance","fill",1,"status-filter"],[3,"valueChange","selectionChange","value","disabled"],["value",""],["value","NEW"],["value","DONE"],["class","summary-card",4,"ngIf"],["class","spinner-container",4,"ngIf"],["class","order-card",4,"ngFor","ngForOf"],[1,"summary-card"],[1,"summary-row"],[3,"ngClass"],[1,"spinner-container"],["diameter","100"],[1,"order-card"],[1,"order-row"],[1,"order-row","created-at"],["class","order-row",4,"ngIf"]],template:function(e,m){e&1&&(n(0,"div",0)(1,"div",1)(2,"button",2),f("click",function(){return m.back()}),i(3,"Back"),t(),n(4,"button",2),f("click",function(){return m.refresh()}),i(5,"Refresh"),t(),n(6,"mat-form-field",3)(7,"mat-label"),i(8,"Filter by Status"),t(),n(9,"mat-select",4),T("valueChange",function(P){return h(m.selectedStatus,P)||(m.selectedStatus=P),P}),f("selectionChange",function(){return m.filterOrders()}),n(10,"mat-option",5),i(11,"All"),t(),n(12,"mat-option",6),i(13,"NEW"),t(),n(14,"mat-option",7),i(15,"DONE"),t()()()(),O(16,ee,20,24,"mat-card",8)(17,te,2,0,"div",9)(18,ae,56,44,"mat-card",10),t()),e&2&&(r(2),l("disabled",m.loading),r(2),l("disabled",m.loading),r(5),b("value",m.selectedStatus),l("disabled",m.loading),r(7),l("ngIf",!m.loading),r(),l("ngIf",m.loading),r(),l("ngForOf",m.filteredOrders))},dependencies:[J,z,q,G,H,D,R,A,I,w,k,N,W,j,L,X,V,U,Q,K,F,B],styles:[".orders-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:8px}.order-card[_ngcontent-%COMP%]{border-radius:16px}.order-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:4px 0}.order-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:500;color:#666}.order-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-weight:600}.created-at[_ngcontent-%COMP%]{font-size:.8rem;color:#999}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.5rem 1rem;background:#fff;border-bottom:1px solid #e0e0e0;position:sticky;top:0;z-index:10}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:0 0 auto}.actions[_ngcontent-%COMP%]   .status-filter[_ngcontent-%COMP%]{flex:1;max-width:250px}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:2rem 0}.summary-card[_ngcontent-%COMP%]{margin-bottom:1rem;background:#f9f9f9}.summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.3rem 0;font-size:.95rem}.summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   strong.positive[_ngcontent-%COMP%]{color:#2e7d32}.summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   strong.negative[_ngcontent-%COMP%]{color:#c62828}.order-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.2rem 0}.order-row[_ngcontent-%COMP%]   .positive[_ngcontent-%COMP%]{color:#2e7d32;font-weight:600}.order-row[_ngcontent-%COMP%]   .negative[_ngcontent-%COMP%]{color:#c62828;font-weight:600}"]})};export{Z as OrdersComponent};
