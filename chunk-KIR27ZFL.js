import{a as N}from"./chunk-GUVUZK4T.js";import{$ as k,S as I,T as P,_ as T,aa as B,ba as w,c as O,ca as $,d as M,da as F,ea as D,f as b,fa as R,g as h,h as y,ia as A}from"./chunk-C74INXJP.js";import{$b as p,Ab as t,Bb as v,Kb as _,Lb as l,Ua as r,Za as u,Zb as n,_b as x,ac as S,bc as E,cc as g,eb as C,fc as d,gc as m,jb as f,yb as s,zb as i}from"./chunk-5QXQLTZQ.js";import"./chunk-TSRGIXR5.js";function L(o,a){if(o&1&&(i(0,"div",4)(1,"span"),n(2,"Exit Price:"),t(),i(3,"span"),n(4),d(5,"number"),t()()),o&2){let e=l().$implicit;r(4),p("$ ",m(5,1,e.ExitPrice,"1.2-4"))}}function G(o,a){if(o&1&&(i(0,"div",4)(1,"span"),n(2,"Exit Type:"),t(),i(3,"span"),n(4),t()()),o&2){let e=l().$implicit;r(4),x(e.ExitType)}}function z(o,a){if(o&1&&(i(0,"div",4)(1,"span"),n(2,"Failure Reason:"),t(),i(3,"span"),n(4),t()()),o&2){let e=l().$implicit;r(4),x(e.FailureReason)}}function W(o,a){if(o&1&&(i(0,"mat-card",3)(1,"mat-card-header")(2,"mat-card-title"),n(3),t()(),i(4,"mat-card-content")(5,"div",4)(6,"span"),n(7,"Entry:"),t(),i(8,"span"),n(9),d(10,"number"),t()(),i(11,"div",4)(12,"span"),n(13,"Current Price:"),t(),i(14,"span"),n(15),d(16,"number"),t()(),i(17,"div",4)(18,"span"),n(19,"PnL:"),t(),i(20,"span"),n(21),d(22,"number"),d(23,"number"),t()(),i(24,"div",4)(25,"span"),n(26,"Stop Loss:"),t(),i(27,"span"),n(28),d(29,"number"),t()(),i(30,"div",4)(31,"span"),n(32,"Target 1:"),t(),i(33,"span"),n(34),d(35,"number"),t()(),i(36,"div",4)(37,"span"),n(38,"Target 2:"),t(),i(39,"span"),n(40),d(41,"number"),t()(),i(42,"div",4)(43,"span"),n(44,"Timeframe:"),t(),i(45,"span"),n(46),t()(),i(47,"div",5)(48,"span"),n(49,"Created:"),t(),i(50,"span"),n(51),d(52,"date"),t()(),f(53,L,6,4,"div",6)(54,G,5,1,"div",6)(55,z,5,1,"div",6),t(),i(56,"mat-card-actions")(57,"button",7),n(58),t(),v(59,"span",8),t()()),o&2){let e=a.$implicit,c=l();r(3),E(" ",e.Symbol," \u2022 ",e.Direction," \u2022 ",e.Status," "),r(6),p("$ ",m(10,19,e.EntryPrice,"1.2-4")),r(6),p("$ ",m(16,22,e.CurrentPrice,"1.2-4")),r(6),S(" $ ",m(22,25,e.PnlAmount,"1.2-2")," (",m(23,28,e.PnlPercent,"1.2-2"),"%) "),r(7),p("$ ",m(29,31,e.StopLoss,"1.2-4")),r(6),p("$ ",m(35,34,e.TargetPrice,"1.2-4")),r(6),p("$ ",m(41,37,e.Target2Price,"1.2-4")),r(6),S("",e.ExecutionTimeframe," / ",e.ConfirmationTimeframe),r(5),x(m(52,40,e.CreatedAt,"HH:mm dd/MM/yyyy")),r(2),s("ngIf",e.ExitPrice),r(),s("ngIf",e.ExitType),r(),s("ngIf",e.FailureReason),r(2),s("color",g(c.getStatusColor(e.Status))),r(),p(" ",e.Status," ")}}var H=class o{constructor(a,e){this._marketService=a;this._snackbar=e}orders=[];ngOnInit(){this._marketService.getTradeOrders().subscribe(a=>{this.orders=a.Orders,console.log("Orders fetched:",this.orders)})}getStatusColor(a){switch(a){case"NEW":return"accent";case"TARGET1":return"primary";case"TARGET2":return"warn";default:return""}}deleteOrder(a){this._marketService.deleteOrder(a).subscribe(()=>{this.orders=this.orders.filter(e=>e.Id!==a),console.log(`Order with ID ${a} deleted.`)})}refresh(){this._marketService.getTradeOrders().subscribe(a=>{this.orders=a.Orders,console.log("Orders refreshed:",this.orders),this._snackbar.open("Orders refreshed","Close",{duration:2e3})})}back(){window.history.back()}static \u0275fac=function(e){return new(e||o)(u(A),u(T))};static \u0275cmp=C({type:o,selectors:[["app-orders"]],decls:7,vars:1,consts:[[1,"orders-container"],["mat-button","",3,"click"],["class","order-card",4,"ngFor","ngForOf"],[1,"order-card"],[1,"order-row"],[1,"order-row","created-at"],["class","order-row",4,"ngIf"],["mat-stroked-button","","disabled","",3,"color"],[1,"spacer"]],template:function(e,c){e&1&&(v(0,"app-header"),i(1,"div",0)(2,"button",1),_("click",function(){return c.back()}),n(3,"Back"),t(),i(4,"button",1),_("click",function(){return c.refresh()}),n(5,"Refresh"),t(),f(6,W,60,43,"mat-card",2),t()),e&2&&(r(6),s("ngForOf",c.orders))},dependencies:[R,B,F,$,D,w,P,I,y,O,M,N,k,h,b],styles:[".orders-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:8px}.order-card[_ngcontent-%COMP%]{border-radius:16px}.order-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:4px 0}.order-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:500;color:#666}.order-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-weight:600}.created-at[_ngcontent-%COMP%]{font-size:.8rem;color:#999}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})};export{H as OrdersComponent};
