import{a as Y,b as U,c as X,e as Z,g as ee,h as te}from"./chunk-FOCZSY4A.js";import{$ as z,Aa as Q,Da as ne,S as L,T as j,_ as W,a as B,aa as H,b as R,c as F,e as A,f as D,g as $,ga as V,r as N,wa as q,xa as G,ya as J,za as K}from"./chunk-ND5J342T.js";import{$b as c,Ab as n,Bb as h,Gb as E,Kb as g,Lb as p,Ua as r,Za as x,Zb as i,_b as v,ac as S,bc as T,cc as w,dc as I,eb as b,ec as k,hc as _,ia as M,ic as d,ja as y,jb as O,jc as m,yb as s,zb as t}from"./chunk-USGJPQKR.js";import"./chunk-TSRGIXR5.js";var C=class{BaseStake=0;TotalPnlAmount=0;TotalPnlPercent=0;DonePnlAmount=0;Orders=[]};var P=(o,a)=>({positive:o,negative:a});function re(o,a){if(o&1&&(t(0,"mat-card",11)(1,"mat-card-content")(2,"div",12)(3,"span"),i(4,"Total PnL Amount:"),n(),t(5,"strong",13),i(6),d(7,"number"),n()(),t(8,"div",12)(9,"span"),i(10,"Total PnL Percent:"),n(),t(11,"strong",13),i(12),d(13,"number"),n()(),t(14,"div",12)(15,"span"),i(16,"Done PnL Amount:"),n(),t(17,"strong",13),i(18),d(19,"number"),n()()()()),o&2){let e=p();r(5),s("ngClass",_(15,P,e.fullResult.TotalPnlAmount>0,e.fullResult.TotalPnlAmount<0)),r(),c(" $ ",m(7,6,e.fullResult.TotalPnlAmount,"1.2-2")," "),r(5),s("ngClass",_(18,P,e.fullResult.TotalPnlPercent>0,e.fullResult.TotalPnlPercent<0)),r(),c(" ",m(13,9,e.fullResult.TotalPnlPercent,"1.2-2"),"% "),r(5),s("ngClass",_(21,P,e.fullResult.DonePnlAmount>0,e.fullResult.DonePnlAmount<0)),r(),c(" $ ",m(19,12,e.fullResult.DonePnlAmount,"1.2-2")," ")}}function ae(o,a){o&1&&(t(0,"div",14),h(1,"mat-spinner",15),n())}function oe(o,a){if(o&1&&(t(0,"div",17)(1,"span"),i(2,"Exit Price:"),n(),t(3,"span"),i(4),d(5,"number"),n()()),o&2){let e=p().$implicit;r(4),c("$ ",m(5,1,e.ExitPrice,"1.2-4"))}}function le(o,a){if(o&1&&(t(0,"div",17)(1,"span"),i(2,"Exit Type:"),n(),t(3,"span"),i(4),n()()),o&2){let e=p().$implicit;r(4),v(e.ExitType)}}function se(o,a){if(o&1&&(t(0,"div",17)(1,"span"),i(2,"Failure Reason:"),n(),t(3,"span"),i(4),n()()),o&2){let e=p().$implicit;r(4),v(e.FailureReason)}}function de(o,a){if(o&1){let e=E();t(0,"mat-card",16)(1,"mat-card-header")(2,"mat-card-title"),i(3),n()(),t(4,"mat-card-content")(5,"div",17)(6,"span"),i(7,"Entry:"),n(),t(8,"span"),i(9),d(10,"number"),n()(),t(11,"div",17)(12,"span"),i(13,"Current Price:"),n(),t(14,"span"),i(15),d(16,"number"),n()(),t(17,"div",17)(18,"span"),i(19,"PnL:"),n(),t(20,"span",13),i(21),d(22,"number"),d(23,"number"),n()(),t(24,"div",17)(25,"span"),i(26,"Stop Loss:"),n(),t(27,"span"),i(28),d(29,"number"),n()(),t(30,"div",17)(31,"span"),i(32,"Target 1:"),n(),t(33,"span"),i(34),d(35,"number"),n()(),t(36,"div",17)(37,"span"),i(38,"Target 2:"),n(),t(39,"span"),i(40),d(41,"number"),n()(),t(42,"div",17)(43,"span"),i(44,"Timeframe:"),n(),t(45,"span"),i(46),n()(),t(47,"div",18)(48,"span"),i(49,"Created:"),n(),t(50,"span"),i(51),d(52,"date"),n()(),O(53,oe,6,4,"div",19)(54,le,5,1,"div",19)(55,se,5,1,"div",19),t(56,"div",20)(57,"button",21),g("click",function(){let u=M(e).$implicit,f=p();return y(f.goToChart(u.Symbol))}),i(58," Open Chart "),n()()()()}if(o&2){let e=a.$implicit;r(3),T(" ",e.Symbol," \u2022 ",e.Direction," \u2022 ",e.Status," "),r(6),c("$ ",m(10,17,e.EntryPrice,"1.2-4")),r(6),c("$ ",m(16,20,e.CurrentPrice,"1.2-4")),r(5),s("ngClass",_(41,P,e.PnlAmount>0,e.PnlAmount<0)),r(),S(" $ ",m(22,23,e.PnlAmount,"1.2-2")," (",m(23,26,e.PnlPercent,"1.2-2"),"%) "),r(7),c("$ ",m(29,29,e.StopLoss,"1.2-4")),r(6),c("$ ",m(35,32,e.TargetPrice,"1.2-4")),r(6),c("$ ",m(41,35,e.Target2Price,"1.2-4")),r(6),S("",e.ExecutionTimeframe," / ",e.ConfirmationTimeframe),r(5),v(m(52,38,e.CreatedAt,"HH:mm dd/MM/yyyy")),r(2),s("ngIf",e.ExitPrice),r(),s("ngIf",e.ExitType),r(),s("ngIf",e.FailureReason)}}var ie=class o{constructor(a,e,l){this._marketService=a;this._snackbar=e;this.router=l}orders=[];filteredOrders=[];selectedStatus="";fullResult=new C;loading=!1;ngOnInit(){this.loading=!0,this._marketService.getTradeOrders().subscribe(a=>{this.orders=a.Orders,this.fullResult=a,this.filteredOrders=[...this.orders],this.loading=!1,console.log("Orders fetched:",this.orders)})}goToChart(a){this.router.navigate(["/chartTest",a])}filterOrders(){this.selectedStatus?this.filteredOrders=this.orders.filter(a=>a.Status===this.selectedStatus):this.filteredOrders=[...this.orders]}getStatusColor(a){return a==="NEW"?"primary":a==="DONE"?"accent":""}deleteOrder(a){this._marketService.deleteOrder(a).subscribe(()=>{this.orders=this.orders.filter(e=>e.Id!==a),console.log(`Order with ID ${a} deleted.`)})}refresh(){this.loading=!0,this._marketService.getTradeOrders().subscribe(a=>{this.orders=a.Orders,this.fullResult=a,this.filteredOrders=[...this.orders],console.log("Orders refreshed:",this.orders),this.loading=!1,this._snackbar.open("Orders refreshed","Close",{duration:2e3})})}back(){window.history.back()}static \u0275fac=function(e){return new(e||o)(x(ne),x(W),x(N))};static \u0275cmp=b({type:o,selectors:[["app-orders"]],decls:19,vars:7,consts:[[1,"orders-container"],[1,"actions"],["mat-button","",3,"click","disabled"],["appearance","fill",1,"status-filter"],[3,"valueChange","selectionChange","value","disabled"],["value",""],["value","NEW"],["value","DONE"],["class","summary-card",4,"ngIf"],["class","spinner-container",4,"ngIf"],["class","order-card",4,"ngFor","ngForOf"],[1,"summary-card"],[1,"summary-row"],[3,"ngClass"],[1,"spinner-container"],["diameter","100"],[1,"order-card"],[1,"order-row"],[1,"order-row","created-at"],["class","order-row",4,"ngIf"],[1,"order-row","actions"],["mat-stroked-button","","color","primary",3,"click"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"button",2),g("click",function(){return l.back()}),i(3,"Back"),n(),t(4,"button",2),g("click",function(){return l.refresh()}),i(5,"Refresh"),n(),t(6,"mat-form-field",3)(7,"mat-label"),i(8,"Filter by Status"),n(),t(9,"mat-select",4),k("valueChange",function(f){return I(l.selectedStatus,f)||(l.selectedStatus=f),f}),g("selectionChange",function(){return l.filterOrders()}),t(10,"mat-option",5),i(11,"All"),n(),t(12,"mat-option",6),i(13,"NEW"),n(),t(14,"mat-option",7),i(15,"DONE"),n()()()(),O(16,re,20,24,"mat-card",8)(17,ae,2,0,"div",9)(18,de,59,44,"mat-card",10),n()),e&2&&(r(2),s("disabled",l.loading),r(2),s("disabled",l.loading),r(5),w("value",l.selectedStatus),s("disabled",l.loading),r(7),s("ngIf",!l.loading),r(),s("ngIf",l.loading),r(),s("ngForOf",l.filteredOrders))},dependencies:[Q,q,J,K,G,j,L,$,B,R,F,z,Y,V,H,te,ee,Z,X,U,D,A],styles:[".orders-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:8px}.order-card[_ngcontent-%COMP%]{border-radius:16px}.order-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:4px 0}.order-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:500;color:#666}.order-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-weight:600}.created-at[_ngcontent-%COMP%]{font-size:.8rem;color:#999}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.5rem 1rem;background:#fff;border-bottom:1px solid #e0e0e0;position:sticky;top:0;z-index:10}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:0 0 auto}.actions[_ngcontent-%COMP%]   .status-filter[_ngcontent-%COMP%]{flex:1;max-width:250px}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:2rem 0}.summary-card[_ngcontent-%COMP%]{margin-bottom:1rem;background:#f9f9f9}.summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.3rem 0;font-size:.95rem}.summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   strong.positive[_ngcontent-%COMP%]{color:#2e7d32}.summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   strong.negative[_ngcontent-%COMP%]{color:#c62828}.order-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.2rem 0}.order-row[_ngcontent-%COMP%]   .positive[_ngcontent-%COMP%]{color:#2e7d32;font-weight:600}.order-row[_ngcontent-%COMP%]   .negative[_ngcontent-%COMP%]{color:#c62828;font-weight:600}.order-card.clickable[_ngcontent-%COMP%]{cursor:pointer;transition:transform .1s ease,box-shadow .1s ease}.order-card.clickable[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 2px 8px #00000026}"]})};export{ie as OrdersComponent};
